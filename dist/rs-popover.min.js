angular.module("rs.popover",[]).run(function(){"use strict";var t,e;t=document.createTextNode(".rs-popover-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0 }     .rs-popover-loading, .rs-popover-error { width: 200px; height: 140px }     .rs-popover-error { color: #c40022 }     .rs-popover-message { width: 100%; position: absolute; top: 50%; left: 50%; -moz-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); text-align: center; }     .rs-popover-body { margin: 0; padding: 20px }     .rs-popover-footer > .rs-status-error { float: left; margin-top: 3px; }     .rs-popover-footer > .rs-processing-indicator { margin-top: 5px; }"),e=document.createElement("style"),e.type="text/css",e.appendChild(t),document.head.appendChild(e)}),function(t){try{t=angular.module("rs.popover")}catch(e){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopover.html",'<div class="rs-popover-wrapper" ng-hide="is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="close()"></div>\n  <div class="rs-popover">\n    <div ng-class="{{ styles }}"></div>\n    <div class="rs-popover-content">\n      <div class="rs-popover-error" ng-show="is(\'error\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-loading" ng-show="is(\'loading\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="is(\'open\')" ng-transclude></div>\n    </div>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("Attachment",function(){"use strict";function t(t,e,o){this.element=t,this.target=e,this.attachmentPoint=o}var e=11,o=-33;return t.prototype.position=function(){var r,s;r=this.target.offset(),this.attachmentPoint===t.TOP_LEFT?(r.top+=this.target.outerHeight()+e,r.left+=this.target.outerWidth()/2+o):(r.top+=this.target.outerHeight()/2+o,r.left+=this.target.outerWidth()+e),s=$(".rs-popover",this.element).first(),s.css({top:r.top,left:r.left})},t.LEFT_TOP="left-top",t.TOP_LEFT="top-left",t}),function(t){try{t=angular.module("rs.popover")}catch(e){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopoverForm.html",'<div class="rs-popover-wrapper" ng-hide="is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="close()"></div>\n  <div class="rs-popover">\n    <div ng-class="{{ styles }}"></div>\n    <form name="form" class="rs-popover-content" novalidate>\n      <div class="rs-popover-error" ng-show="is(\'error\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-loading" ng-show="is(\'loading\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="is(\'open\') || is(\'saving\') || is(\'failed\')" ng-transclude></div>\n      <div class="rs-popover-footer rs-btn-group" ng-show="is(\'open\') || is(\'saving\') || is(\'failed\')">\n        <button class="rs-btn rs-btn-primary" ng-disabled="is(\'saving\')" ng-click="save()">{{ saveLabel || \'Save\' }}</button>\n        <button class="rs-btn rs-btn-link" ng-hide="is(\'saving\') || is(\'failed\')" ng-click="close()">{{ cancelLabel || \'Cancel\' }}</button>\n        <span class="rs-status-error" ng-show="is(\'failed\')">{{ state.message }}</span>\n        <i class="rs-processing-indicator" ng-show="is(\'saving\')"></i>\n      </div>\n    </form>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("focus",["$timeout",function(t){"use strict";return function(e,o){return t(function(){var t;t=e.find(":input").first(),t.focus()},0,o||!1)}}]),angular.module("rs.popover").factory("form",function(){"use strict";function t(t,e){e.$setPristine()}function e(t){t=angular.element(t),t.find(":input").each(function(t,e){var o;e=angular.element(e),o=e.controller("ngModel"),o&&(void 0===o.$viewValue?o.$setViewValue(""):""===o.$viewValue&&o.$setViewValue(void 0),o.$commitViewValue())})}return{reset:t,validate:e}}),angular.module("rs.popover").controller("PopoverController",["$scope","$element","registry","form","tether","focus","PopoverState",function(t,e,o,r,s,n,i){"use strict";function a(){var o;o=new i,o.on("open",t.onOpen||angular.noop),o.on("save",t.onSave||angular.noop),o.on("close",a),o.on("close",function(){r.reset(e,t.form)}),o.on("load",function(){n(e)}),t.state=o}this.id=t.id,o.register(t.id,t),a(),t.styles={"rs-popover-arrow":!0,"rs-popover-arrow-top-left":"top-left"===t.attach,"rs-popover-arrow-left-top":"left-top"===t.attach},t.$on("$destroy",function(){o.deregister(t.id)}),t.is=function(e){return t.state.is(e)},t.open=function(o){t.state.open(),s.attach(e,o,t.attach)},t.close=function(){t.state.close()},t.toggle=function(e){t.state.is("closed")?t.open(e):t.close()},t.save=function(){r.validate(e,t.form),t.form.$valid&&t.state.save()}}]),angular.module("rs.popover").factory("PopoverState",["$q",function(t){"use strict";function e(){this.state=e.CLOSED,this.subscriptions={open:[],load:[],error:[],save:[],fail:[],close:[]}}return e.prototype.is=function(t){return this.state===t},e.prototype.on=function(t,e){this.subscriptions[t].push(e)},e.prototype.fire=function(e){var o=[];return angular.forEach(this.subscriptions[e],function(t){o.push(t())}),t.all(o)},e.prototype.open=function(){this.message="Loadingâ€¦",this.state=e.LOADING,this.fire("open").then(angular.bind(this,this.load)).catch(angular.bind(this,this.error))},e.prototype.load=function(){this.state=e.OPEN,this.fire("load")},e.prototype.error=function(t){this.message=t,this.state=e.ERROR,this.fire("error")},e.prototype.save=function(){this.state=e.SAVING,this.fire("save").then(angular.bind(this,this.close)).catch(angular.bind(this,this.fail))},e.prototype.fail=function(t){this.message=t.toString(),this.state=e.FAILED,this.fire("fail")},e.prototype.close=function(){this.state=e.CLOSED,this.fire("close")},e.CLOSED="closed",e.LOADING="loading",e.OPEN="open",e.ERROR="error",e.SAVING="saving",e.FAILED="failed",e}]),angular.module("rs.popover").factory("registry",function(){"use strict";function t(){this.popovers={}}return t.prototype.register=function(t,e){if(!t)throw"Popover ID must not be empty!";if(t in this.popovers)throw'Popover ID "'+t+'" has already been registered!';this.popovers[t]=e},t.prototype.deregister=function(t){if(!(t in this.popovers))throw'Popover ID "'+t+'" has not been registered!';delete this.popovers[t]},t.prototype.popover=function(t){if(t in this.popovers)return this.popovers[t];throw'Popover ID "'+t+'" has not been registered!'},new t}),angular.module("rs.popover").directive("rsPopover",function(){"use strict";return{scope:{id:"@",attach:"@",onOpen:"="},restrict:"EA",controller:"PopoverController",transclude:!0,templateUrl:"rsPopover.html",compile:function(t,e){e.attach=e.attach||"top-left"}}}),angular.module("rs.popover").directive("rsPopoverForm",function(){"use strict";return{scope:{id:"@",attach:"@",saveLabel:"@",cancelLabel:"@",onOpen:"=",onSave:"="},restrict:"EA",controller:"PopoverController",transclude:!0,templateUrl:"rsPopoverForm.html",compile:function(t,e){e.attach=e.attach||"top-left"}}}),angular.module("rs.popover").directive("rsPopoverTrigger",["registry",function(t){"use strict";function e(t,e){if(t.rsPopoverTrigger)return t.rsPopoverTrigger;if(e)return e.id;throw"No popover ID was specified for popover trigger!"}function o(t,e){return e.rsPopoverTarget?angular.element("#"+e.rsPopoverTarget):t}return{restrict:"A",require:"?^rsPopover",link:function(r,s,n,i){var a,p;a=e(n,i),p=o(s,n),s.on("click",function(e){e.preventDefault(),t.popover(a).toggle(p),r.$apply()})}}}]),angular.module("rs.popover").factory("tether",["$window","Attachment",function(t,e){"use strict";function o(){this.attachments=[],angular.element(t).on("resize scroll",angular.bind(this,this.reposition))}return o.prototype.attach=function(t,o,r){var s;return s=new e(t,o,r),s.position(),this.attachments.push(s),s},o.prototype.reposition=function(){angular.forEach(this.attachments,function(t){t.position()})},o.prototype.detach=function(t){var e;angular.forEach(this.attachments,function(o,r){o.element===t&&(e=r)}),this.attachments.splice(e,1)},new o}]);
//# sourceMappingURL=rs-popover.min.js.map