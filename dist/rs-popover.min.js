angular.module("rs.popover",[]).run(function(){"use strict";var t,r;t=document.createTextNode(".rs-popover-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0 }     .rs-popover-content { display: block; }     .rs-popover-loading, .rs-popover-error { width: 200px; height: 140px }     .rs-popover-error { color: #c40022 }     .rs-popover-message { width: 100%; position: absolute; top: 50%; left: 50%; -moz-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); text-align: center; }     .rs-popover-body { margin: 0; padding: 20px }     .rs-popover-footer > .rs-status-error { float: left; margin-top: 3px; }     .rs-popover-footer > .rs-processing-indicator { margin-top: 5px; }"),r=document.createElement("style"),r.type="text/css",r.appendChild(t),document.head.appendChild(r)}),function(t){try{t=angular.module("rs.popover")}catch(r){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopover.html",'<div class="rs-popover-wrapper" ng-hide="ctrl.is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="ctrl.close()"></div>\n  <div class="rs-popover">\n    <div ng-class="ctrl.arrow()"></div>\n    <div class="rs-popover-content">\n      <div class="rs-popover-loading" ng-show="ctrl.is(\'opening\')">\n        <div class="rs-popover-message">Loading&hellip;</div>\n      </div>\n      <div class="rs-popover-error" ng-show="ctrl.is(\'openingFailed\')">\n        <div class="rs-popover-message">{{ ctrl.error() }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="ctrl.is(\'open\')" ng-transclude></div>\n    </div>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("Attachment",function(){"use strict";function t(t,r,o){this.element=t,this.target=r,this.attachmentPoint=o}var r=11,o=-33;return t.prototype.position=function(){var e,s;e=this.target.offset(),this.attachmentPoint===t.TOP_LEFT?(e.top+=this.target.outerHeight()+r,e.left+=this.target.outerWidth()/2+o):(e.top+=this.target.outerHeight()/2+o,e.left+=this.target.outerWidth()+r),s=$(".rs-popover",this.element).first(),s.css({top:e.top,left:e.left})},t.LEFT_TOP="left-top",t.TOP_LEFT="top-left",t}),function(t){try{t=angular.module("rs.popover")}catch(r){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopoverForm.html",'<div class="rs-popover-wrapper" ng-hide="ctrl.is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="ctrl.close()"></div>\n  <div class="rs-popover">\n    <div ng-class="ctrl.arrow()"></div>\n    <form name="form" class="rs-popover-content" novalidate>\n      <div class="rs-popover-loading" ng-show="ctrl.is(\'opening\')">\n        <div class="rs-popover-message">Loading&hellip;</div>\n      </div>\n      <div class="rs-popover-error" ng-show="ctrl.is(\'openingFailed\')">\n        <div class="rs-popover-message">{{ ctrl.error() }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="ctrl.is(\'open\') || ctrl.is(\'saving\') || ctrl.is(\'savingFailed\')" ng-transclude></div>\n      <div class="rs-popover-footer rs-btn-group" ng-show="ctrl.is(\'open\') || ctrl.is(\'saving\') || ctrl.is(\'savingFailed\')">\n        <button class="rs-btn rs-btn-primary" ng-disabled="ctrl.is(\'saving\')" ng-click="ctrl.save()">{{ saveLabel || \'Save\' }}</button>\n        <button class="rs-btn rs-btn-link" ng-hide="ctrl.is(\'saving\') || ctrl.is(\'savingFailed\')" ng-click="ctrl.close()">{{ cancelLabel || \'Cancel\' }}</button>\n        <span class="rs-status-error" ng-show="ctrl.is(\'savingFailed\')">{{ ctrl.error() }}</span>\n        <i class="rs-processing-indicator" ng-show="ctrl.is(\'saving\')"></i>\n      </div>\n    </form>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("form",["$timeout",function(t){"use strict";function r(t){t.$setPristine()}function o(t,r){return r=angular.element(r),r.find(":input").each(function(t,r){var o;r=angular.element(r),o=r.controller("ngModel"),o&&(void 0===o.$viewValue?o.$setViewValue(""):""===o.$viewValue&&o.$setViewValue(void 0),o.$commitViewValue())}),t.$valid}function e(r,o){return t(function(){var t;t=r.find(":input").first(),t.focus()},0,o||!1)}return{reset:r,validate:o,focus:e}}]),angular.module("rs.popover").controller("PopoverController",["$scope","$element","$q","PopoverStateMachine","form","registry","tether",function(t,r,o,e,s,n,i){"use strict";function a(t,r,e,s){var n;return r=r||angular.noop,n=r(s.data),o.when(n).then(function(){e.finish()},function(r){t.errorMessage=r.toString(),e.fail()})}this.is=function(t){return this.fsm.is(t)},this.open=function(t,o,e){this.fsm.setContext({element:r,target:t,corner:o,data:e}),this.fsm.open()},this.save=function(){s.validate(t.form,r)&&this.fsm.save()},this.close=function(){this.fsm.close()},this.toggle=function(){var t;t=this.is("closed")?this.open:this.close,t.apply(this,arguments)},this.arrow=function(){var t,r;return t=this.fsm.context,r=t.corner,{"rs-popover-arrow":!0,"rs-popover-arrow-top-left":"top-left"===r,"rs-popover-arrow-left-top":"left-top"===r}},this.error=function(){return this.errorMessage},this.onOpen=function(r,o){return i.attach(o.element,o.target,o.corner),a(this,t.onOpen,r,o)},this.onLoad=function(t,r){s.focus(r.element)},this.onSave=function(r,o){return a(this,t.onSave,r,o)},this.onClose=function(r,o){t.form&&s.reset(t.form),i.detach(o.element)},this.id=t.id,this.fsm=new e,this.fsm.on("opening",angular.bind(this,this.onOpen)),this.fsm.on("open",angular.bind(this,this.onLoad)),this.fsm.on("saving",angular.bind(this,this.onSave)),this.fsm.on("closed",angular.bind(this,this.onClose)),n.register(this.id,this),t.$on("$destroy",function(){n.deregister(t.id)})}]),angular.module("rs.popover").factory("PopoverStateMachine",["$q",function(t){"use strict";function r(){this.context={},this.state=a,this.subscriptions={},this.subscriptions[o]=[],this.subscriptions[e]=[],this.subscriptions[s]=[],this.subscriptions[n]=[],this.subscriptions[i]=[],this.subscriptions[a]=[]}var o="opening",e="openingFailed",s="open",n="saving",i="savingFailed",a="closed";return r.prototype.setContext=function(t){this.context=t},r.prototype.is=function(t){return this.state===t},r.prototype.on=function(t,r){this.subscriptions[t].push(r)},r.prototype.transition=function(r){var o=[];return this.state=r,this.subscriptions[r].forEach(function(t){o.push(t(this,this.context))},this),t.all(o)},r.prototype.open=function(){(this.is(a)||this.is(e))&&this.transition(o)},r.prototype.save=function(){(this.is(s)||this.is(i))&&this.transition(n)},r.prototype.finish=function(){this.is(o)?this.transition(s):this.is(n)&&this.transition(a)},r.prototype.fail=function(){this.is(o)?this.transition(e):this.is(n)&&this.transition(i)},r.prototype.close=function(){this.is(n)||this.transition(a)},r}]),angular.module("rs.popover").factory("registry",function(){"use strict";function t(){this.popovers={}}return t.prototype.register=function(t,r){if(!t)throw"Popover ID must not be empty!";if(t in this.popovers)throw'Popover ID "'+t+'" has already been registered!';this.popovers[t]=r},t.prototype.deregister=function(t){if(!(t in this.popovers))throw'Popover ID "'+t+'" has not been registered!';delete this.popovers[t]},t.prototype.popover=function(t){if(t in this.popovers)return this.popovers[t];throw'Popover ID "'+t+'" has not been registered!'},new t}),angular.module("rs.popover").directive("rsPopover",function(){"use strict";return{scope:{id:"@",onOpen:"="},restrict:"EA",controller:"PopoverController",controllerAs:"ctrl",transclude:!0,templateUrl:"rsPopover.html"}}),angular.module("rs.popover").directive("rsPopoverForm",function(){"use strict";return{scope:{id:"@",saveLabel:"@",cancelLabel:"@",onOpen:"=",onSave:"="},restrict:"EA",controller:"PopoverController",controllerAs:"ctrl",transclude:!0,templateUrl:"rsPopoverForm.html"}}),angular.module("rs.popover").directive("rsPopoverTrigger",["registry","Attachment",function(t,r){"use strict";function o(t,r){if(t.rsPopoverTrigger)return t.rsPopoverTrigger;if(r)return r.id;throw"No popover ID was specified for popover trigger!"}function e(t,r){return r.rsPopoverTarget?angular.element("#"+r.rsPopoverTarget):t}function s(t){return t.rsPopoverAttach?t.rsPopoverAttach:r.TOP_LEFT}function n(t,r){return r.rsPopoverData?t.$eval(r.rsPopoverData):{}}return{restrict:"A",require:"?^rsPopover",link:function(r,i,a,p){var c,l,u,v;c=o(a,p),l=e(i,a),u=s(a),v=n(r,a),i.on("click",function(o){o.preventDefault(),t.popover(c).toggle(l,u,v),r.$apply()})}}}]),angular.module("rs.popover").factory("tether",["$window","Attachment",function(t,r){"use strict";function o(){this.attachments=[],angular.element(t).on("resize",angular.bind(this,this.reposition))}return o.prototype.attach=function(t,o,e){var s;return s=new r(t,o,e),s.position(),this.attachments.push(s),s},o.prototype.reposition=function(){angular.forEach(this.attachments,function(t){t.position()})},o.prototype.detach=function(t){var r;angular.forEach(this.attachments,function(o,e){o.element===t&&(r=e)}),this.attachments.splice(r,1)},new o}]);
//# sourceMappingURL=rs-popover.min.js.map