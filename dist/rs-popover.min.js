angular.module("rs.popover",[]).run(function(){"use strict";var t,o;t=document.createTextNode(".rs-popover-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0 }     .rs-popover-loading, .rs-popover-error { width: 200px; height: 140px }     .rs-popover-error { color: #c40022 }     .rs-popover-message { width: 100%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }     .rs-popover-body { margin: 0; padding: 20px }"),o=document.createElement("style"),o.type="text/css",o.appendChild(t),document.head.appendChild(o)}),function(t){try{t=angular.module("rs.popover")}catch(o){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopover.html",'<div class="rs-popover-wrapper" ng-hide="is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="close()"></div>\n  <div class="rs-popover">\n    <div ng-class="{{ styles }}"></div>\n    <div class="rs-popover-content">\n      <div class="rs-popover-error" ng-show="is(\'error\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-loading" ng-show="is(\'loading\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="is(\'open\')" ng-transclude></div>\n    </div>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("Attachment",function(){"use strict";function t(t,o,e){this.element=t,this.target=o,this.attachmentPoint=e}var o=11,e=-33;return t.prototype.position=function(){var r,s;r=this.target.offset(),this.attachmentPoint===t.TOP_LEFT?(r.top+=this.target.outerHeight()+o,r.left+=this.target.outerWidth()/2+e):(r.top+=this.target.outerHeight()/2+e,r.left+=this.target.outerWidth()+o),s=$(".rs-popover",this.element).first(),s.css({top:r.top,left:r.left})},t.LEFT_TOP="left-top",t.TOP_LEFT="top-left",t}),function(t){try{t=angular.module("rs.popover")}catch(o){t=angular.module("rs.popover",[])}t.run(["$templateCache",function(t){t.put("rsPopoverForm.html",'<div class="rs-popover-wrapper" ng-hide="is(\'closed\')">\n  <div class="rs-popover-overlay" ng-click="close()"></div>\n  <div class="rs-popover">\n    <div ng-class="{{ styles }}"></div>\n    <form name="form" class="rs-popover-content" novalidate>\n      <div class="rs-popover-error" ng-show="is(\'error\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-loading" ng-show="is(\'loading\')">\n        <div class="rs-popover-message">{{ state.message }}</div>\n      </div>\n      <div class="rs-popover-body" ng-show="is(\'open\') || is(\'saving\')" ng-transclude></div>\n      <div class="rs-popover-footer rs-btn-group" ng-show="is(\'open\') || is(\'saving\')">\n        <button class="rs-btn rs-btn-primary" ng-disabled="is(\'saving\')" ng-click="save()">{{ saveLabel || \'Save\' }}</button>\n        <button class="rs-btn rs-btn-link" ng-hide="is(\'saving\')" ng-click="close()">{{ cancelLabel || \'Cancel\' }}</button>\n      </div>\n    </form>\n  </div>\n</div>\n')}])}(),angular.module("rs.popover").factory("focus",["$timeout",function(t){"use strict";return function(o,e){return t(function(){var t;t=o.find(":input").first(),t.focus()},0,e||!1)}}]),angular.module("rs.popover").controller("PopoverController",["$scope","$element","registry","tether","focus","PopoverState",function(t,o,e,r,s,n){"use strict";function i(t){o.find(":input").each(function(o,e){var r;e=$(e),r=e.controller("ngModel"),r&&t.call(this,e,r)})}function a(){i(function(t,o){o.$setUntouched()})}function p(){i(function(t,o){o.$setTouched()})}function c(){var e;e=new n,e.on("open",t.onOpen||angular.noop),e.on("save",t.onSave||angular.noop),e.on("close",c),e.on("load",function(){s(o)}),a(),t.state=e}this.id=t.id,e.register(t.id,t),c(),t.styles={"rs-popover-arrow":!0,"rs-popover-arrow-top-left":"top-left"===t.attach,"rs-popover-arrow-left-top":"left-top"===t.attach},t.$on("$destroy",function(){e.deregister(t.id)}),t.is=function(o){return t.state.is(o)},t.open=function(e){t.state.open(),r.attach(o,e,t.attach)},t.close=function(){t.state.close()},t.toggle=function(o){t.state.is("closed")?t.open(o):t.close()},t.save=function(){p(),t.form.$valid&&t.state.save()}}]),angular.module("rs.popover").factory("PopoverState",["$q",function(t){"use strict";function o(){this.state=o.CLOSED,this.subscriptions={open:[],load:[],error:[],save:[],close:[]}}return o.prototype.is=function(t){return this.state===t},o.prototype.on=function(t,o){this.subscriptions[t].push(o)},o.prototype.fire=function(o){var e=[];return angular.forEach(this.subscriptions[o],function(t){e.push(t())}),t.all(e)},o.prototype.open=function(){this.message="Loadingâ€¦",this.state=o.LOADING,this.fire("open").then(angular.bind(this,this.load)).catch(angular.bind(this,this.error))},o.prototype.load=function(){this.state=o.OPEN,this.fire("load")},o.prototype.error=function(t){this.message=t,this.state=o.ERROR,this.fire("error")},o.prototype.save=function(){this.state=o.SAVING,this.fire("save").then(angular.bind(this,this.close)).catch(angular.bind(this,this.load))},o.prototype.close=function(){this.state=o.CLOSED,this.fire("close")},o.CLOSED="closed",o.LOADING="loading",o.OPEN="open",o.ERROR="error",o.SAVING="saving",o}]),angular.module("rs.popover").factory("registry",function(){"use strict";function t(){this.popovers={}}return t.prototype.register=function(t,o){if(!t)throw"Popover ID must not be empty!";if(t in this.popovers)throw'Popover ID "'+t+'" has already been registered!';this.popovers[t]=o},t.prototype.deregister=function(t){if(!(t in this.popovers))throw'Popover ID "'+t+'" has not been registered!';delete this.popovers[t]},t.prototype.popover=function(t){if(t in this.popovers)return this.popovers[t];throw'Popover ID "'+t+'" has not been registered!'},new t}),angular.module("rs.popover").directive("rsPopover",function(){"use strict";return{scope:{id:"@",attach:"@",onOpen:"="},restrict:"EA",controller:"PopoverController",transclude:!0,templateUrl:"rsPopover.html",compile:function(t,o){o.attach=o.attach||"top-left"}}}),angular.module("rs.popover").directive("rsPopoverForm",function(){"use strict";return{scope:{id:"@",attach:"@",saveLabel:"@",cancelLabel:"@",onOpen:"=",onSave:"="},restrict:"EA",controller:"PopoverController",transclude:!0,templateUrl:"rsPopoverForm.html",compile:function(t,o){o.attach=o.attach||"top-left"}}}),angular.module("rs.popover").directive("rsPopoverTrigger",["registry",function(t){"use strict";return{restrict:"A",require:"?^rsPopover",link:function(o,e,r,s){var n;if(r.rsPopoverTrigger)n=r.rsPopoverTrigger;else{if(!s)throw"No popover ID was specified for popover trigger!";n=s.id}e.on("click",function(r){r.preventDefault(),t.popover(n).toggle(e),o.$apply()})}}}]),angular.module("rs.popover").factory("tether",["$window","Attachment",function(t,o){"use strict";function e(){this.attachments=[],angular.element(t).on("resize scroll",angular.bind(this,this.reposition))}return e.prototype.attach=function(t,e,r){var s;return s=new o(t,e,r),s.position(),this.attachments.push(s),s},e.prototype.reposition=function(){angular.forEach(this.attachments,function(t){t.position()})},e.prototype.detach=function(t){var o;angular.forEach(this.attachments,function(e,r){e.element===t&&(o=r)}),this.attachments.splice(o,1)},new e}]);
//# sourceMappingURL=rs-popover.min.js.map